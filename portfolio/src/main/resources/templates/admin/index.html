<!DOCTYPE html>
<html>

<head>
	<title>Portfolio OTA</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
	<header th:insert="fragments/admin_header::header"></header>
	<div class="page-content" id="admin-home">
		<div class="row">
			<div class="col-md-2">
				<div class="sidebar content-box" style="display: block;">
					<ul class="nav">
						<!-- Main menu -->
						<li class="current"><a href="index.html"><i class="glyphicon glyphicon-home"></i> Dashboard</a></li>
						<li><a href="calendar.html"><i class="glyphicon glyphicon-calendar"></i> Calendar</a></li>
						<li><a href="stats.html"><i class="glyphicon glyphicon-stats"></i> Statistics (Charts)</a></li>
						<li><a href="tables.html"><i class="glyphicon glyphicon-list"></i> Tables</a></li>
						<li><a href="buttons.html"><i class="glyphicon glyphicon-record"></i> Buttons</a></li>
						<li><a href="editors.html"><i class="glyphicon glyphicon-pencil"></i> Editors</a></li>
						<li><a href="forms.html"><i class="glyphicon glyphicon-tasks"></i> Forms</a></li>
						<li class="submenu">
							<a href="#">
								<i class="glyphicon glyphicon-list"></i> Pages
								<span class="caret pull-right"></span>
							</a>
							<!-- Sub menu -->
							<ul>
								<li><a href="login.html">Login</a></li>
								<li><a href="signup.html">Signup</a></li>
							</ul>
						</li>
					</ul>
				</div>
			</div>
			<div class="col-10">
				<div class="content-box" style="display: block;">
					<div class="container" style="padding: 10rem;">
						<h2 class="page-title">Your Account</h2>
						<form th:action="@{/portfolio/admin/modify}" method="post">
							<!-- <div class="img-area">
							TODO adminのプロフィール画像追加＆変更機能
							<img th:src="${'data:image/png;base64,'+image}"
								th:class="${user.getUserImg().length == 0 ? 'hidden' : 'mypage-img'}">
							<img src="/img/avator.png" alt="" th:class="${user.getUserImg().length == 0 ? 'mypage-img' : 'hidden'}">
							<label id="file-btn" for="userImg" class="bg-primary text-white">Choose your photo</label>
							<input type="file" name="file" id="userImg" style="display: none;">
							<p id="selected-status" class="mt-1">[Not yet selcted]</p>
						</div> -->
							<table class="table table-hover table-bordered table-responsive-md text-center" th:object="${admin}">
								<tr>
									<th scope="col">Admin ID</th>
									<td class="normal" th:text="*{id}"></td>
								</tr>
								<tr>
									<th scope="col" style="width: 30%;">Admin Name</th>
									<td class="normal" th:text="*{adminName}"></td>
									<td class="modify hidden"><span><input type="text" name="adminName" th:value="*{adminName}"
												th:placeholder="*{adminName}" style="width: 40%;" required></span></td>
								</tr>
								<tr>
									<th scope="col">Password</th>
									<td class="normal" th:text="*{password}"></td>
									<td class="modify hidden"><span><input type="text" name="password" th:value="*{adminName}"
												th:placeholder="*{adminName}" style="width: 40%;" required></span></td>
								</tr>
							</table>
							<div class="btn-area">
								<button id="modify-btn" class="btn btn-info" type="button">Modify</button>
								<button id="cancel-btn" class="btn btn-warning hidden" type="button">Cancel</button>
								<button id="submit-btn" class="btn btn-primary hidden" type="submit">Submit</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<footer th:insert="fragments/admin_footer::footer"></footer>
	<script type="text/javascript">
		$(document).ready(function () {
			/* 修正ボタン押下時 */
			$('#modify-btn').on('click', function () {
				$('.normal').addClass('hidden');
				$('.modify').removeClass('hidden');
				$('#modify-btn').addClass('hidden');
				$('#cancel-btn').removeClass('hidden');
				$('#submit-btn').removeClass('hidden');
			});

			/*キャンセルボタン押下時*/
			$('#cancel-btn').on('click', function () {
				$('.normal').removeClass('hidden');
				$('.modify').addClass('hidden');
				$('#modify-btn').removeClass('hidden');
				$('#cancel-btn').addClass('hidden');
				$('#submit-btn').addClass('hidden');
			});

			/*修正完了ダイアログの初期化*/
			var dialog = bootbox.dialog({
				message: '<p class="text-center mb-0">Your profile changed</p>',
				backdrop: true,
				centerVertical: true,
				show: false
			});

			/*ユーザ情報更新後のアラート表示*/
			const completeMsg = /*[[${completeMsg}]]*/ '';
			console.log("completeMsg : " + completeMsg);
			if (completeMsg) {
				dialog.modal('show');
			}
		})
	</script>
</body>

</html>
